# 課題4 記事ステータスの追加

## 実装

### やりたいこと

1. rakeタスクに`公開待ちの中で、公開日時が過去になっているものがあれば、ステータスを「公開」に変更されるようにする`タスクを作成
2. 上記のrakeタスクを`schedule.rb(whenever)`に1時間毎に定期実行させる(バッチ処理)設定を記述して、1時間毎に定期的にcronを編集する
3. cronをcronコマンドでアップデート

## RSpec

## 用語

### rake

- rubyのソースコードで処理内容を定義できるビルドツール

### rakeタスク

- rakeが実行する処理内容

>rakeタスクを使用する場面の例  
>>1. 何かしらのデータの連携  
>>2. データベースのバックアップ  
>>3. 定期的にデータを更新、削除する  

### ビルド

- ソースコード(人間用)から実際のプログラム(機械用)に変換する作業

### whenever

- cronの設定をrubyの文法で扱えるようにするライブラリ

[CapistranoでWhenever](https://qiita.com/yumiyon/items/388fbb84450f49a6ab0d)

### バッチ処理

- あらかじめ登録した一連の処理を自動的に実行する処理方式

### cron

- メモリ場で常に命令を待機しているデーモンプロセスの1つ

### デーモンプロセス

- UNIX系OSでメインメモリ上に常駐して特定の機能を提供するプログラム

## その他

### N+1問題

#### 概要

N+1:SQLの実行回数+全てのレコードの取得  
1. postをallで取得(全てのレコードの取得)
2. postに紐づくuserをpostの数だけ(n回)取得(postの数だけ(n回)SQLが実行される)

大量のSQL実行処理により動作が重くなる

#### 解決法

includesメソッドで関連するモデルのデータを先に取得  
includes(:取得したいモデル)
